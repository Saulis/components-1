<link rel="import" href="../paper-checkbox/paper-checkbox.html">

<script>
  window.vaadin = window.vaadin || {};
  vaadin.elements = vaadin.elements || {};
  vaadin.elements.grid = vaadin.elements.grid || {};

  vaadin.elements.grid.SortBehavior = {

    properties: {
      sortOrder: Array
    },

    observers: [
      'clearCache(sortOrder, sortOrder.*)'
    ],

    _sort: function(items) {
      items.sort(this._multiSort.bind(this));
    },

    _multiSort: function(a, b) {
      return (this.sortOrder || []).map(function(sort) {
        if (sort.direction === 'asc') {
          return this._compare(Polymer.Base.get(sort.path, a), Polymer.Base.get(sort.path, b));
        } else if (sort.direction === 'desc') {
          return this._compare(Polymer.Base.get(sort.path, b), Polymer.Base.get(sort.path, a));
        }
        return 0;
      }, this).reduce(function firstNonZeroValue(p, n) {
        return p ? p : n;
      }, 0);
    },

    _compare: function(a, b) {
      if (a < b) {
        return -1;
      }
      if (a > b) {
        return 1;
      }
      return 0;
    }

  };
</script>
